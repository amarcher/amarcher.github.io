<!DOCTYPE html>
<html>
  <head>
    <title>Andrew Archer: Blog</title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/main.css">
    <link rel="stylesheet" type="text/css" href="../stylesheets/blog-stylesheet.css">
    <link rel="stylesheet" type="text/css" href="../stylesheets/bullseye.css">
  </head>
  <body>
    <div class="post">
      <p class='title'> Relational and Non-relational Databases </p>
      <p class='date'> Saturday, September 20, 2014  </p>
      <p class='text'> Most web applications need to ways to create, read, update, and delete data -- especially data generated by users as they interact with it. The two most popular methods to manage data in web application design are (1) using relational databases (e.g. SQL) and (2) using non-relational databases (e.g. MongoDB, Google BigTable/Spanner). Both technologies allow the application to create, read, update, and delete (C.R.U.D.) data, but there are important differences between the two to highlight.</p>
      <p class='subtitle'> Relational Databases </p>
      <p class='text'>Relational databases store data as 'records' in tables with pre-defined columns. The records each occupy one row. See example below for a "users" table:</p>
      <table>
        <thead>
          <tr>
            <td style="width: 5%;">id</td>
            <td>username</td>
            <td>full_name</td>
            <td>favorite_color</td>
            <td>created_at</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="width: 5%;">1</td>
            <td>aarcher</td>
            <td>andrew archer</td>
            <td>yellow</td>
            <td>2009-09-01 00:02:01</td>
          </tr>
          <tr>
            <td style="width: 5%;">2</td>
            <td>jtennisfer</td>
            <td>jennifer nguyen</td>
            <td>blue</td>
            <td>2011-03-21 12:33:26</td>
          </tr>
          <tr>
            <td style="width: 5%;">3</td>
            <td>russell_the_fish</td>
            <td>russell fish</td>
            <td>orange</td>
            <td>2014-06-21 15:29:52</td>
          </tr>
        </tbody>
      </table>
      <p class='text'>Each table has what's known as a 'primary key' -- a column for which no two rows contain the same data. In the above example that is the 'id' column, which increments automatically as records are inserted. These primary keys are often referenced by other tables that need to <strong>relate</strong> or attribute their records to another table. For instance, you could have a table 'comments' that stores comments by users on your site:</p>
      <table>
        <thead>
          <tr>
            <td style="width: 5%;">id</td>
            <td style="width: 5%;">user_id</td>
            <td>comment</td>
            <td>created_at</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="width: 5%;">1001</td>
            <td style="width: 5%;">1</td>
            <td>"Amazing web app! I love it."</td>
            <td>2014-09-19 01:22:11</td>
          </tr>
          <tr>
            <td style="width: 5%;">1002</td>
            <td style="width: 5%;">3</td>
            <td>"Blub, blub, blub"</td>
            <td>2014-09-19 05:25:52</td>
          </tr>
          <tr>
            <td style="width: 5%;">1003</td>
            <td style="width: 5%;">2</td>
            <td>"Meh, I've seen better"</td>
            <td>2014-09-19 06:32:18</td>
          </tr>
          <tr>
            <td style="width: 5%;">1004</td>
            <td style="width: 5%;">3</td>
            <td>"Blub, I've seen better too"</td>
            <td>2014-09-19 08:26:43</td>
          </tr>
        </tbody>
      </table>
      <p class='text'>The user_id column is called a 'foreign key' -- it attributes the comment to a user. This is the essence of a relational database -- you use the relationship between well-defined tables to represent the data your application needs to store. Having this tight and stable relationship between your tables has its pros and cons.
      <ul class='list'>
        <li>Pros:</li>
        <ul class='list'>
          <li>Can be queried with simple intuitive commands.</li>
          <li>Good for very complex queries involving lots of conditions and joins.</li>
          <li>Well established and documented.</li>
        </ul>
        <li>Cons:</li>
        <ul class='list'>
          <li>Requires a well-defined and well-understood database 'schema' (structure)</li>
          <li>Difficult to change tables or columns (involves deleting tables and rebuilding them)</li>
          <li>Tables are homed on a single server; when they grow long (many rows) queries require more processing power (CPU & RAM).</li>
        </ul>
      </ul>
    </p>
      <p class='subtitle'> Non-Relational Databases </p>
      <p class='text'>Non-Relational Databases hold onto records as documents or break it up into key value pairs stored in 'column families' all within the same table entity. Significantly, Non-Relational Databases do not have a pre-defined structure and can accomodate all the information your application currently needs or will need in the future by adding as many "columns" (keys) or "column families" as needed. It's expected that most records will have many blank cells -- this quality referred to as it's "sparsity." When there's no data in these cells they don't take up any space at all. Here's we might represent a non-relational database -- just imagine those empty cells being collapsed to take up no space at all:</p>
      <table>
        <thead>
          <tr>
            <td style="width: 5%;" rowspan=2>id</td>
            <td rowspan=2>created_at</td>
            <td colspan=3>(column family) user</td>
            <td colspan=2>(column family) comment</td>
          </tr>
          <tr>
            <td>username</td>
            <td>full_name</td>
            <td>favorite_color</td>
            <td style="width: 5%;">commenter</td>
            <td>comment</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>2009-09-01 00:02:01</td>
            <td>aarcher</td>
            <td>andrew archer</td>
            <td>yellow</td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td>2</td>
            <td>2011-03-21 12:33:26</td>
            <td>jtennisfer</td>
            <td>jennifer nguyen</td>
            <td>blue</td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td>3</td>
            <td>2014-09-19 01:22:11</td>
            <td></td>
            <td></td>
            <td></td>
            <td style="width: 5%;">1</td>
            <td>"Amazing web app! I love it."</td>
          </tr>
          <tr>
            <td>4</td>
            <td>2014-09-19 06:32:18</td>
            <td></td>
            <td></td>
            <td></td>
            <td style="width: 5%;">2</td>
            <td>"Meh, I've seen better"</td>
          </tr>
        </tbody>
      </table>
      <p class='text'>Storing data in a non-structured, non-relational database has its pros and cons.
      <ul class='list'>
        <li>Pros:</li>
        <ul class='list'>
          <li>Can query without knowing or understanding a 'schema'</li>
          <li>Easy to change or expand by adding new columns/keys</li>
          <li>Data can be homed on multiple servers and queries can be run in parallel across all of them.</li>
        </ul>
        <li>Cons:</li>
        <ul class='list'>
          <li>Hard to run complex queries on.</li>
          <li>Relatively new and not-well documented.</li>
        </ul>
      </ul>
    </p>
    <p class='subtitle'> What's Best? </p>
    <p class='text'> Web application developers are using non-relational databases increasingly, since they permit more fluid development because there's low cost to change. There's no need to know exactly how your application will need to store data before you launch it. Still, there are proponents of both relational and non-relational databases. The "right answer" for any web application is a subjective assessment. I hope that some of the pros and cons listed above may help guide your thinking.</p>
    </div>
    <svg id="breadcrumbs" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <!--<circle id="white" cx="50%" cy="50%" r="43.75%" fill='#FFFFFF' />-->
        <!--<circle id="black" cx="50%" cy="50%" r="34.375%" fill='#000000' />-->
        <circle id="blue" cx="50%" cy="50%" r="25%" fill='#165DD9' />
        <circle id="red" cx="50%" cy="50%" r="15.625%" fill='#C91A1A' />

        <defs>
          <path id="blog"
                d="M 250 312.5
                   A 62 62 0 0 0 312.5 250" />
          <path id="post"
                d="M 250 359.3
                   A 109 109 0 0 0 359.3 250" />
        </defs>

        <a xlink:href="#" class="sitelink" onmouseover="evt.target.setAttribute('opacity', '0.5');" onmouseout="evt.target.setAttribute('opacity','1)');">
          <text text-anchor="middle" id="post_id" style="font-family:'Roboto Slab'; font-size: 90%;">
            <textPath xlink:href="#post" startOffset="50%">
              (Non)-Relational DB's
            </textPath>
          </text>
        </a>

        <a xlink:href="index.html" class="sitelink" onmouseover="evt.target.setAttribute('opacity', '0.5');" onmouseout="evt.target.setAttribute('opacity','1)');">
          <text text-anchor="middle" id="blogposts" style="font-family:'Roboto Slab'; font-size: 90%;">
            <textPath xlink:href="#blog" startOffset="50%">
              Blog-Posts
            </textPath>
          </text>
        </a>

        <a xlink:href="../index.html" class="sitelink" onmouseover="evt.target.setAttribute('opacity', '0.5');" onmouseout="evt.target.setAttribute('opacity','1)');">
          <circle id="yellow" cx="50%" cy="50%" r="6.25%" fill='#F7D705' xlink:href="../index.html" />
        </a>
    </svg>
    <a href='../index.html' class='sitelink' id="home_button">
      <span aria-hidden="true" data-icon="&#xe605;"></span>
    </a>
  </body>
</html>